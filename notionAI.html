<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion 融入教育：完整模式</title>
    <style>
        :root {
            --primary-color: #a1887f; /* 捻色調 / Muted Terracotta */
            --correct-color: #5a9c6c; /* 柔和綠 / Muted Green */
            --incorrect-color: #c96567; /* 柔和紅 / Muted Red */
            --secondary-color: #d2b48c; /* 淺咖啡 / Tan */
            --bg-color: #f9f5f0; /* 米色背景 / Beige Background */
            --glass-bg: rgba(243, 240, 233, 0.75); /* 玻璃背景 */
            --text-color: #4a4a4a; /* 深灰色文字 */
            --heading-color: #6d4c41; /* 深咖啡色標題 */
        }
        
        html {
            font-size: 110%; 
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: var(--text-color);
            background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
        }

        #ebook-container {
            width: 95%;
            max-width: 1200px;
            height: 95vh;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 8px 40px rgba(0,0,0,0.12);
            display: flex;
            overflow: hidden;
        }

        #toc-sidebar {
            width: 300px;
            flex-shrink: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            box-shadow: 4px 0px 20px rgba(0,0,0,0.05);
        }

        #toc-sidebar h2 {
            font-size: 1.6rem;
            color: var(--heading-color);
            border-bottom: 2px solid rgba(161, 136, 127, 0.2);
            padding-bottom: 1rem;
            margin: 0 0 1.5rem 0;
            text-align: left;
        }

        #toc-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            overflow-y: auto;
        }

        #toc-list li {
            padding: 0.9rem 1.2rem;
            cursor: pointer;
            transition: all 0.25s ease-in-out;
            font-size: 1.05rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            text-align: left;
            position: relative;
        }

        #toc-list li:hover {
            background-color: rgba(255,255,255, 0.5);
            color: var(--heading-color);
        }

        #toc-list li.active {
            background-color: #fff;
            color: var(--heading-color);
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        #main-content-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #ebook-header {
            background-color: #fff;
            color: var(--heading-color);
            padding: 1.2rem 1.5rem;
            text-align: center;
            flex-shrink: 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        #ebook-header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        #page-content {
            flex-grow: 1;
            padding: 2rem 3.5rem;
            position: relative;
            overflow-y: auto; 
        }
        
        .page-scrollable .page {
            height: auto;
            justify-content: flex-start;
        }

        .page {
            display: none;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            animation: fadeIn 0.5s;
        }
        .page.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .page-icon { width: 80px; height: 80px; margin: 0 auto 1.5rem; display: block; }
        .content-layout { display: flex; align-items: center; gap: 2.5rem; }
        .content-text { flex: 1; }
        .content-image { width: 140px; flex-shrink: 0; }
        .content-image svg { width: 100%; height: auto; }

        h2, h3 {
            text-align: center;
            color: var(--heading-color);
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 1rem;
            margin: 0 0 2rem 0;
        }
        h3 { text-align: left; font-size: 1.5rem; margin-top: 1.5rem; }
        h3.no-margin-top { margin-top: 0; }
        p, ul, ol, table { font-size: 1.15rem; line-height: 2; }
        li { margin-bottom: 1rem; }
        ol li { margin-bottom: 1.2rem; }
        
        a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
        }
        a:hover {
            text-decoration: underline;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 1rem;
            text-align: left;
        }
        th {
            background-color: #f8f9fa;
            color: var(--heading-color);
        }
        
        #navigation {
            padding: 1rem;
            text-align: center;
            border-top: 1px solid #e2e8f0;
            background-color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        #navigation button {
            background-color: var(--correct-color);
            color: white;
            border: none;
            padding: 0.7rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        #navigation button:disabled { background-color: #d8d8d8; cursor: not-allowed; }
        #navigation button:not(:disabled):hover { opacity: 0.9; }
        #page-indicator { font-size: 1rem; font-weight: bold; color: #475569; min-width: 100px; }
        .toc-button { display: none; }

        .quiz-container { text-align: center; width: 100%; }
        #quiz-progress-bar-container { width: 100%; background-color: #eee; border-radius: 5px; margin-bottom: 1.5rem; }
        #quiz-progress-bar { height: 10px; width: 0%; background-color: var(--primary-color); border-radius: 5px; transition: width 0.3s; }
        .quiz-question p { font-weight: bold; font-size: 1.2rem; margin-bottom: 1rem; text-align: left; }
        .answer-options { display: flex; flex-direction: column; gap: 0.7rem; }
        .answer-btn { width: 100%; padding: 0.8rem; border: 2px solid #cbd5e1; background-color: #fff; border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s; font-size: 1rem; }
        .answer-btn:hover:not(:disabled) { background-color: #f0f3f8; border-color: var(--secondary-color); }
        .answer-btn.correct { background-color: #dcfce7; border-color: var(--correct-color); color: #166534; font-weight: bold; }
        .answer-btn.incorrect { background-color: #fee2e2; border-color: var(--incorrect-color); color: #991b1b; }
        .answer-btn:disabled { cursor: not-allowed; opacity: 0.9; }
        #quiz-feedback { margin-top: 1rem; font-weight: bold; height: 2rem; }
        #quiz-next-btn { background-color: var(--secondary-color); padding: 0.8rem 1.8rem; font-size: 1.1rem; visibility: hidden; }
        #quiz-result { font-size: 1.8rem; font-weight: bold; color: var(--heading-color); }

        @media (max-width: 1024px) {
            #ebook-container {
                flex-direction: column;
                height: 98vh;
            }
            #toc-sidebar {
                width: auto;
                height: auto;
                flex-shrink: 1;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            }
            #toc-sidebar h2 { display: none; }
            #toc-list {
                display: flex;
                overflow-x: auto;
                padding-bottom: 1rem;
                scrollbar-width: thin;
            }
            #toc-list li {
                flex-shrink: 0;
                margin-right: 0.5rem;
                margin-bottom: 0;
            }
            #page-content { padding: 1.5rem; }
        }
        
        @media (max-width: 768px) {
            html { font-size: 100%; }
            .content-layout { flex-direction: column; }
            .content-image { width: 100px; margin-bottom: 1rem; }
            #navigation button { padding: 0.6rem 0.8rem; }
        }
    </style>
</head>
<body>

    <div id="ebook-container">
        <div id="toc-sidebar">
            <h2>目錄</h2>
            <ul id="toc-list"></ul>
        </div>
        <div id="main-content-area">
            <div id="ebook-header">
                <h1>Notion 融入教育：完整模式</h1>
            </div>
            <div id="page-content">
                <div class="page active">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm2-4h-2V7h2v6z" fill="var(--primary-color)"/></svg>
                    <h2>Notion 教育版總覽</h2>
                    <div class="content-layout">
                        <div class="content-text">
                            <h3>教育版特色</h3>
                            <p>Notion 官方提供專為師生設計的教育版（Education Plus plan），擁有<strong class="highlight-text">無限制上傳</strong>與 <strong class="highlight-text">30 天版本歷史</strong>兩大核心優勢。</p>
                            <p>個人教育版可邀請多達 100 位訪客共同編輯，非常適合師生協作。</p>
                        </div>
                        <div class="content-image">
                           <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z" fill="var(--primary-color)"/></svg>
                        </div>
                    </div>
                </div>
                <div class="page">
                    <h3>申請方式</h3>
                    <p>教師與學生必須使用學校的教育信箱 (.edu 或學校網域) 登入 Notion，才能免費升級教育版。</p>
                    <ol>
                        <li>使用學校 Google 郵箱註冊或在設定中切換電郵。</li>
                        <li>確認帳號中多於 1 名成員已移除。</li>
                        <li>在「設定→升級方案」中選擇「取得教育方案」即可。</li>
                    </ol>
                </div>
                <div class="page">
                    <h3>教育版與免費版比較</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>項目</th>
                                <th>免費版</th>
                                <th>教育版 (Plus Plan)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>成員數</td>
                                <td>1成員，10位訪客</td>
                                <td>1成員，<strong class="highlight-text">100位訪客</strong></td>
                            </tr>
                             <tr>
                                <td>檔案上傳</td>
                                <td>單檔限制 5 MB</td>
                                <td><strong class="highlight-text">無限制</strong></td>
                            </tr>
                             <tr>
                                <td>頁面歷史</td>
                                <td>7 天</td>
                                <td><strong class="highlight-text">30 天</strong></td>
                            </tr>
                             <tr>
                                <td>其他特色</td>
                                <td>—</td>
                                <td>無限圖表、增強訪客</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="var(--primary-color)"/></svg>
                    <h2>教師的教育筆記本</h2>
                    <h3 class="no-margin-top">課程設計與教案管理</h3>
                    <p>教師可利用 Notion 的<strong class="highlight-text">資料庫儀表板</strong>，將每節課的目標、活動、資源與評量指標系統化存放，方便複製、修改與搜尋。</p>
                    <p>透過「共編」功能，可與同科教師共享頁面，共同編寫教學流程與學習單。</p>
                </div>
                <div class="page">
                     <h3>專案追蹤與專業成長</h3>
                     <ul>
                        <li><b>專案/任務追蹤</b>：使用<strong class="highlight-text">看板模式</strong>（Board view）管理課程進度或行政任務，設立「待辦→進行中→完成」欄位，讓進度一目了然。</li>
                        <br>
                        <li><b>專業成長日誌</b>：利用日誌模板紀錄每週教學反思、研習筆記及改進策略，並透過標籤快速歸檔與搜尋。</li>
                     </ul>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 2H6c-1.1 0-2 .9-2 2v16h2V4h12V2zm-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 14H7v-2h2v2zm0-4H7v-2h2v2zm0-4H7V8h2v2z" fill="var(--primary-color)"/></svg>
                    <h2>學生的學習筆記本</h2>
                     <div class="content-layout">
                        <div class="content-text">
                            <h3>學習日誌與專題追蹤</h3>
                            <ul>
                                <li><b>學習日誌</b>：建立表格資料庫，紀錄課堂重點與反思，並設定科目、情緒等屬性，促進<strong class="highlight-text">元認知</strong>。</li>
                                <br>
                                <li><b>專題探究</b>：使用<strong class="highlight-text">時間軸</strong>或看板檢視管理專題研究進度，整合研究資料與教師回饋。</li>
                            </ul>
                        </div>
                        <div class="content-image">
                           <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 18H8c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2s2 .9 2 2v12c0 .28.22.5.5.5s.5-.22.5-.5V8c0-1.1.9-2 2-2s2 .9 2 2v8c0 2.21-1.79 4-4 4z" fill="var(--primary-color)"/></svg>
                        </div>
                    </div>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 16V4c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2zm-11-4l-3 4-1.5-2-3.5 5h12l-4-5z" fill="var(--primary-color)"/></svg>
                    <h2>班級與校內資料相簿</h2>
                    <h3 class="no-margin-top">使用 Notion 建立班級相簿</h3>
                     <ol>
                        <li><b>建立圖庫</b>：在新頁面輸入 `/Gallery view` 直接建立圖庫資料庫。</li>
                        <li><b>上傳照片</b>：新增「檔案與媒體」屬性，即可拖拉照片上傳。</li>
                        <li><b>設定標籤</b>：設定日期、活動名稱、學生反思等欄位，讓相簿成為可搜尋的學習檔案。</li>
                    </ol>
                </div>
                 <div class="page">
                    <h3>班級相簿的教學延伸應用</h3>
                    <ul>
                        <li><b>語文課</b>：引導學生以照片為題撰寫日記或故事。</li>
                        <li><b>SEL 課程</b>：讓學生在相片頁面加入自己的情緒反思，促進情緒覺察。</li>
                        <li><b>家校互動</b>：家長可透過公開連結瀏覽相簿，增進對班級活動的了解。</li>
                    </ul>
                </div>
                <div class="page">
                     <h3>校內資料相簿的應用</h3>
                    <p>學校可建立多個圖庫資料庫，分類管理活動照片、宣傳素材、校史照片等。</p>
                     <p>透過「年份」、「部門」、「活動類型」等屬性進行篩選與排序，方便行政團隊快速搜尋資料，並可透過訪客權限分享給特定對象，系統化地保存學校文化與記憶。</p>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" fill="var(--primary-color)"/></svg>
                    <h2>教學整合與設計要點</h2>
                    <ul>
                        <li><b>跨平台整合</b>：可與 Google 表單等工具整合，自動將回饋匯入 Notion 資料庫。</li>
                        <li><b>利用模板</b>：善用官方提供的教案、行事曆等模板，快速建立課程架構。</li>
                        <li><b>保護隱私</b>：在共享頁面時，務必設定適當的權限，保護學生個資與校務資料。</li>
                        <li><b>倡導數位素養</b>：在導入前需培訓師生熟悉基本操作，並指導數據安全與網路禮儀。</li>
                    </ul>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3L1 9l11 6 9-4.91V17h2V9L12 3z" fill="var(--primary-color)"/></svg>
                    <h2>教育意涵與影響</h2>
                    <ul>
                       <li><b>可視化與連結性學習</b>：將筆記轉化為結構化資料庫，讓學生追蹤並連結不同主題的學習成果。</li>
                        <li><b>強化元認知與反思</b>：透過日誌與反思欄位，學生能覺察自己的學習策略與情緒。</li>
                        <li><b>促進教師專業成長</b>：教師透過共筆教案、觀課紀錄和研習筆記建立知識庫。</li>
                        <li><b>保存教育文化與記憶</b>：班級相簿和校內資料相簿讓校園故事得以長期保存。</li>
                    </ul>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="var(--primary-color)"/></svg>
                    <h2>結論</h2>
                    <p>Notion 已從單純的筆記工具轉變為教育場域的<strong class="highlight-text">智慧知識管理平台</strong>。</p>
                    <p>教育版提供的強大功能，為教師與學生打造了靈活且安全的環境。透過精心設計的筆記本與相簿，教育工作者可以系統化地管理課程與學習歷程，推動創新教學與文化保存。</p>
                </div>
                
                <!-- Quiz Page -->
                <div class="page">
                    <h2>最終學習評量</h2>
                    <div class="quiz-container">
                        <div id="quiz-progress-bar-container"><div id="quiz-progress-bar"></div></div>
                        <div id="quiz-question-area"></div>
                        <div id="quiz-feedback"></div>
                        <button id="quiz-next-btn" onclick="nextQuestion()">下一題</button>
                        <div id="quiz-result-area" style="display: none;">
                            <div id="quiz-result"></div>
                        </div>
                    </div>
                </div>

            </div>
            <div id="navigation">
                <button id="prev-btn" onclick="changePage(-1)">上一頁</button>
                <span id="page-indicator"></span>
                <button class="toc-button" onclick="goToPage(1)">回目錄</button>
                <button id="next-btn" onclick="changePage(1)">下一頁</button>
            </div>
        </div>
    </div>

    <script>
        const chapterMapping = [
            { name: "歡迎", startPage: 1, endPage: 1 },
            { name: "Notion 教育版總覽", startPage: 2, endPage: 4 },
            { name: "教師的教育筆記本", startPage: 5, endPage: 6 },
            { name: "學生的學習筆記本", startPage: 7, endPage: 7 },
            { name: "班級與校內資料相簿", startPage: 8, endPage: 10 },
            { name: "教學整合與設計要點", startPage: 11, endPage: 11 },
            { name: "教育意涵與影響", startPage: 12, endPage: 12 },
            { name: "結論", startPage: 13, endPage: 13 },
            { name: "最終學習評量", startPage: 14, endPage: 14 }
        ];

        let currentPageIndex = 1;
        const pages = document.querySelectorAll('#page-content .page');
        const totalPages = pages.length;
        const pageIndicator = document.getElementById('page-indicator');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const tocList = document.getElementById('toc-list');

        function buildTOC() {
            tocList.innerHTML = '';
            chapterMapping.forEach((chapter, index) => {
                const li = document.createElement('li');
                li.textContent = chapter.name;
                li.onclick = () => goToPage(chapter.startPage);
                li.dataset.chapterIndex = index;
                tocList.appendChild(li);
            });
        }
        
        function updateActiveTocItem() {
            const tocItems = document.querySelectorAll('#toc-list li');
            let activeChapterIndex = -1;
            
            chapterMapping.forEach((chapter, index) => {
                if (currentPageIndex >= chapter.startPage && currentPageIndex <= chapter.endPage) {
                    activeChapterIndex = index;
                }
            });

            tocItems.forEach((item, index) => {
                item.classList.toggle('active', index === activeChapterIndex);
            });
        }

        function showPage(index) {
            pages.forEach((page, i) => page.classList.toggle('active', i === (index -1)));
            updateNavigation();
            updateActiveTocItem();
            if (index === totalPages) {
                startQuiz();
            }
        }

        function updateNavigation() {
            pageIndicator.textContent = `第 ${currentPageIndex} / ${totalPages} 頁`;
            prevBtn.disabled = currentPageIndex === 1;
            nextBtn.disabled = currentPageIndex === totalPages;
        }

        function changePage(direction) {
            const newIndex = currentPageIndex + direction;
            if (newIndex >= 1 && newIndex <= totalPages) {
                currentPageIndex = newIndex;
                showPage(newIndex);
            }
        }
        
        function goToPage(pageNumber) {
            currentPageIndex = pageNumber;
            showPage(pageNumber);
        }

        const quizData = [
            { question: "1. 申請 Notion 教育版最關鍵的條件是什麼？", options: ["擁有付費帳號", "使用學校的教育信箱 (.edu)", "邀請100位好友"], correct: 1 },
            { question: "2. Notion 教育版相比免費版，最主要的優勢是什麼？", options: ["可以更改字體顏色", "無限制檔案上傳與30天頁面歷史", "每天多送10個模板"], correct: 1 },
            { question: "3. 老師想用 Notion 管理不同課程的進度，最適合使用哪種檢視模式？", options: ["圖庫 (Gallery) 模式", "看板 (Board) 模式", "列表 (List) 模式"], correct: 1 },
            { question: "4. 學生在 Notion 中建立學習日誌，並設定「科目」、「情緒」等屬性，這主要是在培養什麼能力？", options: ["打字速度", "元認知與反思能力", "繪畫能力"], correct: 1 },
            { question: "5. 老師想建立一個班級相簿讓家長也能觀看，Notion 教育版最多可以邀請多少位訪客？", options: ["10位", "50位", "100位"], correct: 2 },
            { question: "6. 在 Notion 中，哪個指令可以直接建立一個圖庫資料庫？", options: ["/Table view", "/List view", "/Gallery view"], correct: 2 },
            { question: "7. Notion 在教育上的核心價值之一是促進學生的「元認知」，這是指什麼？", options: ["對超自然現象的認知", "對自己學習過程的覺察與反思", "對電腦的認知"], correct: 1 },
            { question: "8. 當學校需要系統化地管理大量的活動照片與校史資料時，最不適合的做法是？", options: ["全部放在同一個 Notion 頁面", "建立多個圖庫資料庫並用標籤分類", "利用篩選和排序功能快速查找"], correct: 0 },
            { question: "9. 為什麼說 Notion 有助於「促進教師專業成長」？", options: ["Notion 會自動幫老師寫論文", "老師可以透過共筆教案、紀錄研習筆記來建立個人知識庫", "Notion 會幫老師上課"], correct: 1 },
            { question: "10. 在 Notion 中與他人共編或分享頁面時，最需要注意什麼？", options: ["頁面美觀度", "設定適當的權限以保護隱私", "使用最多的表情符號"], correct: 1 }
        ];
        
        let currentQuestionIndex = 0, score = 0, quizActive = false;

        function startQuiz() {
            if (quizActive) return;
            quizActive = true;
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('quiz-question-area').style.display = 'block';
            document.getElementById('quiz-result-area').style.display = 'none';
            document.getElementById('quiz-feedback').style.display = 'block';
            document.getElementById('quiz-next-btn').style.visibility = 'hidden';
            displayQuestion();
        }

        function displayQuestion() {
            const questionData = quizData[currentQuestionIndex];
            const questionArea = document.getElementById('quiz-question-area');
            document.getElementById('quiz-progress-bar').style.width = `${((currentQuestionIndex) / quizData.length) * 100}%`;
            document.getElementById('quiz-feedback').innerHTML = '';
            
            let optionsHtml = questionData.options.map((option, i) => 
                `<button class="answer-btn" onclick="checkAnswer(${i}, this)">${option}</button>`
            ).join('');
            
            questionArea.innerHTML = `<div class="quiz-question"><p>${questionData.question}</p><div class="answer-options">${optionsHtml}</div></div>`;
        }

        function checkAnswer(selectedIndex, button) {
            const questionData = quizData[currentQuestionIndex];
            const optionsContainer = button.parentElement;
            const feedbackEl = document.getElementById('quiz-feedback');
            
            Array.from(optionsContainer.children).forEach(btn => btn.disabled = true);

            if (selectedIndex === questionData.correct) {
                button.classList.add('correct');
                feedbackEl.textContent = '答對了！';
                feedbackEl.style.color = 'var(--correct-color)';
                score++;
            } else {
                button.classList.add('incorrect');
                optionsContainer.children[questionData.correct].classList.add('correct');
                feedbackEl.textContent = '答錯了！';
                feedbackEl.style.color = 'var(--incorrect-color)';
            }
            
            const nextBtn = document.getElementById('quiz-next-btn');
            nextBtn.textContent = (currentQuestionIndex === quizData.length - 1) ? "顯示總分" : "下一題";
            nextBtn.style.visibility = 'visible';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                document.getElementById('quiz-next-btn').style.visibility = 'hidden';
                displayQuestion();
            } else {
                showFinalScore();
            }
        }

        function showFinalScore() {
            document.getElementById('quiz-question-area').style.display = 'none';
            document.getElementById('quiz-next-btn').style.visibility = 'hidden';
            document.getElementById('quiz-feedback').style.display = 'none';
            document.getElementById('quiz-progress-bar').style.width = '100%';

            const resultArea = document.getElementById('quiz-result-area');
            document.getElementById('quiz-result').textContent = `你的總分是：${score} / ${quizData.length} 分！`;
            resultArea.style.display = 'block';
            quizActive = false;
        }
        
        // Initial setup
        buildTOC();
        showPage(currentPageIndex);
    </script>

</body>
</html>