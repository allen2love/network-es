<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI素養與教育實踐指南</title>
    <style>
        :root {
            --primary-color: #a1887f; /* 捻色調 / Muted Terracotta */
            --correct-color: #5a9c6c; /* 柔和綠 / Muted Green */
            --incorrect-color: #c96567; /* 柔和紅 / Muted Red */
            --secondary-color: #d2b48c; /* 淺咖啡 / Tan */
            --bg-color: #f9f5f0; /* 米色背景 / Beige Background */
            --glass-bg: rgba(243, 240, 233, 0.65); /* 玻璃背景 */
            --text-color: #4a4a4a; /* 深灰色文字 */
            --heading-color: #6d4c41; /* 深咖啡色標題 */
        }
        
        html {
            font-size: 110%; 
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: var(--text-color);
            background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
        }

        #ebook-container {
            width: 95%;
            max-width: 1200px;
            height: 95vh;
            background-color: #fff;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            display: flex;
            overflow: hidden;
        }

        #toc-sidebar {
            width: 280px;
            flex-shrink: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            box-shadow: 4px 0px 15px rgba(0,0,0,0.05);
        }

        #toc-sidebar h2 {
            font-size: 1.5rem;
            color: var(--heading-color);
            border-bottom: 2px solid rgba(161, 136, 127, 0.2);
            padding-bottom: 1rem;
            margin: 0 0 1.5rem 0;
            text-align: left;
        }

        #toc-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            overflow-y: auto;
        }

        #toc-list li {
            padding: 0.8rem 1rem;
            cursor: pointer;
            transition: all 0.25s ease-in-out;
            font-size: 1.05rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            text-align: left;
            position: relative;
        }

        #toc-list li:hover {
            background-color: rgba(255,255,255, 0.4);
            color: var(--heading-color);
        }

        #toc-list li.active {
            background-color: #fff;
            color: var(--heading-color);
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        #main-content-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #ebook-header {
            background-color: #fff;
            color: var(--heading-color);
            padding: 1rem 1.5rem;
            text-align: center;
            flex-shrink: 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        #ebook-header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        #page-content {
            flex-grow: 1;
            padding: 1.5rem 3rem;
            position: relative;
            overflow: hidden;
            background-color: #fff;
        }

        .page {
            display: none;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            animation: fadeIn 0.5s;
        }
        .page.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .page-icon { width: 70px; height: 70px; margin: 0 auto 1rem; display: block; }
        .content-layout { display: flex; align-items: center; gap: 2rem; }
        .content-text { flex: 1; }
        .content-image { width: 120px; flex-shrink: 0; }
        .content-image svg { width: 100%; height: auto; }

        h2, h3 {
            text-align: center;
            color: var(--heading-color);
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.8rem;
            margin: 0 0 1.5rem 0;
        }
        h3 { text-align: left; font-size: 1.4rem; margin-top: 1rem; }
        h3.no-margin-top { margin-top: 0; }
        p, ul, ol { font-size: 1.1rem; line-height: 1.9; }
        li { margin-bottom: 0.8rem; }
        ol li { margin-bottom: 1rem; }
        
        .highlight-text {
            color: var(--primary-color);
            font-weight: bold;
        }

        #navigation {
            padding: 1rem;
            text-align: center;
            border-top: 1px solid #e2e8f0;
            background-color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        #navigation button {
            background-color: var(--correct-color);
            color: white;
            border: none;
            padding: 0.7rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        #navigation button:disabled { background-color: #d8d8d8; cursor: not-allowed; }
        #navigation button:not(:disabled):hover { opacity: 0.9; }
        #page-indicator { font-size: 1rem; font-weight: bold; color: #475569; min-width: 100px; }
        .toc-button { display: none; }

        .quiz-container { text-align: center; width: 100%; }
        #quiz-progress-bar-container { width: 100%; background-color: #eee; border-radius: 5px; margin-bottom: 1.5rem; }
        #quiz-progress-bar { height: 10px; width: 0%; background-color: var(--primary-color); border-radius: 5px; transition: width 0.3s; }
        .quiz-question p { font-weight: bold; font-size: 1.2rem; margin-bottom: 1rem; text-align: left; }
        .answer-options { display: flex; flex-direction: column; gap: 0.7rem; }
        .answer-btn { width: 100%; padding: 0.8rem; border: 2px solid #cbd5e1; background-color: #fff; border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s; font-size: 1rem; }
        .answer-btn:hover:not(:disabled) { background-color: #f0f3f8; border-color: var(--secondary-color); }
        .answer-btn.correct { background-color: #dcfce7; border-color: var(--correct-color); color: #166534; font-weight: bold; }
        .answer-btn.incorrect { background-color: #fee2e2; border-color: var(--incorrect-color); color: #991b1b; }
        .answer-btn:disabled { cursor: not-allowed; opacity: 0.9; }
        #quiz-feedback { margin-top: 1rem; font-weight: bold; height: 2rem; }
        #quiz-next-btn { background-color: var(--secondary-color); padding: 0.8rem 1.8rem; font-size: 1.1rem; visibility: hidden; }
        #quiz-result { font-size: 1.8rem; font-weight: bold; color: var(--heading-color); }

        @media (max-width: 1024px) {
            #ebook-container {
                flex-direction: column;
                height: 98vh;
            }
            #toc-sidebar {
                width: auto;
                height: auto;
                flex-shrink: 1;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            }
            #toc-sidebar h2 { display: none; }
            #toc-list {
                display: flex;
                overflow-x: auto;
                padding-bottom: 1rem;
                scrollbar-width: thin;
            }
            #toc-list li {
                flex-shrink: 0;
                margin-right: 0.5rem;
                margin-bottom: 0;
            }
            #page-content { padding: 1.5rem; }
        }
        
        @media (max-width: 768px) {
            html { font-size: 100%; }
            .content-layout { flex-direction: column; }
            .content-image { width: 100px; margin-bottom: 1rem; }
            #navigation button { padding: 0.6rem 0.8rem; }
        }
    </style>
</head>
<body>

    <div id="ebook-container">
        <div id="toc-sidebar">
            <h2>目錄</h2>
            <ul id="toc-list"></ul>
        </div>
        <div id="main-content-area">
            <div id="ebook-header">
                <h1>AI素養與教育實踐指南</h1>
            </div>
            <div id="page-content">
                <div class="page active">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm2-4h-2V7h2v6z" fill="var(--primary-color)"/></svg>
                    <h2>AI素養的定義與歷史背景</h2>
                    <div class="content-layout">
                        <div class="content-text">
                            <h3>什麼是AI素養？</h3>
                            <p>AI素養是指個人在面對 AI 技術時，所需具備的知識、技能與態度，使其能<strong class="highlight-text">有效且負責任地</strong>理解、使用與評估 AI。</p>
                            <p>它不僅是技術操作，更包含倫理判斷與社會關懷，是數位素養在 AI 時代的延伸。</p>
                        </div>
                        <div class="content-image">
                           <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="var(--primary-color)" d="M12 2a10 10 0 0 0-10 10c0 4.42 2.87 8.17 6.84 9.5.43.08.59-.18.59-.4v-1.5c-2.78.6-3.37-1.34-3.37-1.34-.39-.99-1-1.25-1-1.25-.78-.53.06-.52.06-.52.86.06 1.31.88 1.31.88.77 1.31 2 1 2.5.76.08-.6.3-1 .55-1.23-2.22-.25-4.56-1.11-4.56-4.94 0-1.1.39-1.99 1.03-2.69-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.4.1 2.65.64.7 1.03 1.6 1.03 2.7 0 3.84-2.34 4.68-4.57 4.93.31.27.58.8.58 1.62v2.34c0 .22.15.48.59.4A10.01 10.01 0 0 0 12 2z"/></svg>
                        </div>
                    </div>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="var(--primary-color)"/></svg>
                    <h2>UNESCO的AI素養與能力框架</h2>
                    <h3 class="no-margin-top">學生AI素養框架四大核心</h3>
                    <ul>
                        <li><strong class="highlight-text">以人為本思維</strong>：確立人類在 AI 決策中的主導地位。</li>
                        <li><strong class="highlight-text">AI倫理</strong>：遵守負責任使用、尊重隱私與公平等原則。</li>
                        <li><strong class="highlight-text">AI技術與應用</strong>：了解 AI 的基本原理與實際應用。</li>
                        <li><strong class="highlight-text">AI系統設計</strong>：培養問題解決與創新設計的思維。</li>
                    </ul>
                </div>
                <div class="page">
                    <h3>教師AI素養框架五大能力</h3>
                    <p>除了學生的四大核心，針對教師，UNESCO 還增加了第五項能力：</p>
                    <ul>
                        <li><strong class="highlight-text">AI教學策略 (AI Pedagogy)</strong>：鼓勵教師善用 AI 輔助工具設計多樣化教學活動，提升課堂互動與學習成效。</li>
                    </ul>
                    <p>框架明確指出，AI 工具應為「<strong class="highlight-text">輔助而非取代教師</strong>」。</p>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L1 21h22L12 2zm1 16h-2v-2h2v2zm0-4h-2V7h2v7z" fill="var(--primary-color)"/></svg>
                    <h2>臺灣AI素養教育政策與實踐</h2>
                    <div class="content-layout">
                        <div class="content-text">
                            <h3>政策與計畫</h3>
                            <p>教育部積極響應國際趨勢，將 AI 素養教育列為重要施政重點。</p>
                            <ul>
                                <li>通過「<strong class="highlight-text">AI素養教學前導計畫</strong>」，在全台舉辦師資培訓。</li>
                                <li>通過《<strong class="highlight-text">AI基本法(草案)</strong>》，強調「負責任推進 AI 發展」。</li>
                                <li>與民間合作「<strong class="highlight-text">全民AI素養普及計畫</strong>」。</li>
                            </ul>
                        </div>
                        <div class="content-image">
                           <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" fill="var(--primary-color)"/></svg>
                        </div>
                    </div>
                </div>
                <div class="page">
                     <h3>課程與培訓實踐</h3>
                     <p>台灣在 AI 教育的實踐上已有不少成果：</p>
                     <ul>
                        <li>在高中設立「<strong class="highlight-text">新興科技教育推廣中心</strong>」，開設 AI、AR/VR 等主題課程。</li>
                        <li>課程範例豐富，如高雄女中開設「<strong class="highlight-text">AI詩人初體驗</strong>」。</li>
                        <li>將生成式 AI 整合入「<strong class="highlight-text">台灣適性學習平台(TALP)</strong>」。</li>
                     </ul>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z" fill="var(--primary-color)"/></svg>
                    <h2>教學活動與評量設計 (分齡)</h2>
                    <h3 class="no-margin-top">國小階段教學設計</h3>
                    <ul>
                        <li><b>學習目標</b>：引發興趣，認識生活中常見的 AI 應用，養成負責任使用的態度。</li>
                        <li><b>教學策略</b>：多用互動、情境化教學，如透過繪本故事或「不插電」的紙牌遊戲模擬 AI 運作。</li>
                        <li><b>活動範例：「AI故事劇情創作」</b>，讓學生分組討論，設計一個 AI 機器人與小朋友的冒險故事，並思考 AI 在故事中應遵守的倫理規則。</li>
                    </ul>
                </div>
                 <div class="page">
                    <h3>國中階段教學設計</h3>
                    <ul>
                        <li><b>學習目標</b>：理解機器學習的基本概念，體驗 AI 系統設計流程，提升對 AI 倫理議題的敏感度。</li>
                        <li><b>教學策略</b>：結合理論與實作，設計跨領域專題，如結合生物與資訊課。</li>
                        <li><b>活動範例：「智慧生物分類」專題</b>，讓學生拍攝校園植物照片，利用線上免費 AI 工具訓練一個能辨識植物的模型。</li>
                    </ul>
                </div>
                 <div class="page">
                    <h3>高中階段教學設計</h3>
                    <ul>
                        <li><b>學習目標</b>：深入了解 AI 原理與技術，具備初步獨立運用 AI 解決問題的能力，並能批判性地評估 AI 的社會影響。</li>
                        <li><b>教學策略</b>：採用專題研習與跨學科教學，引導學生自行撰寫或修改簡單的 AI 程式。</li>
                        <li><b>活動範例：「AI詩詞創作」</b>，學生分組練習撰寫提示詞，引導大型語言模型生成符合主題的詩句，並對 AI 的產出進行篩選、修改與評析。</li>
                    </ul>
                </div>
                <div class="page">
                    <svg class="page-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-4h2v4zm4 0h-2v-7h2v7zm4 0h-2v-2h2v2z" fill="var(--primary-color)"/></svg>
                    <h2>UNESCO框架與臺灣實踐對照表</h2>
                    <h3 class="no-margin-top">以人為本思維</h3>
                    <ul>
                        <li><b class="highlight-text">臺灣對應政策</b>：教師工作坊與課程強調「人機協作」。</li>
                        <li><b class="highlight-text">教學活動示例</b>：國中生分組討論「AI能做什麼、人要做什麼」，透過角色扮演了解分工與人本價值。</li>
                    </ul>
                </div>
                <div class="page">
                    <h3 class="no-margin-top">AI倫理 (Ethics)</h3>
                     <ul>
                        <li><b class="highlight-text">臺灣對應政策</b>：推動AI基本法，強調負責任AI、防範偏見與隱私保護。</li>
                        <li><b class="highlight-text">教學活動示例</b>：高年級生利用生成式AI進行討論創作後，教師引導學生審視AI產出的偏見或錯誤，進行倫理反思和改進。</li>
                    </ul>
                </div>
                 <div class="page">
                    <h3 class="no-margin-top">AI技術與應用 / AI系統設計</h3>
                     <ul>
                        <li><b class="highlight-text">臺灣對應政策</b>：各級學校開設AI程式與應用課程（如「AI詩人」、「影像辨識」等），並推廣跨領域AI專題課程。</li>
                        <li><b class="highlight-text">教學活動示例</b>：國中生小組專題，以AI影像辨識工具分類校園植物，訓練演算法後進行展示，培養問題解決與創意設計。</li>
                    </ul>
                </div>
                
                <!-- Quiz Page -->
                <div class="page">
                    <h2>最終學習評量</h2>
                    <div class="quiz-container">
                        <div id="quiz-progress-bar-container"><div id="quiz-progress-bar"></div></div>
                        <div id="quiz-question-area"></div>
                        <div id="quiz-feedback"></div>
                        <button id="quiz-next-btn" onclick="nextQuestion()">下一題</button>
                        <div id="quiz-result-area" style="display: none;">
                            <div id="quiz-result"></div>
                        </div>
                    </div>
                </div>

            </div>
            <div id="navigation">
                <button id="prev-btn" onclick="changePage(-1)">上一頁</button>
                <span id="page-indicator"></span>
                <button class="toc-button" onclick="goToPage(1)">回目錄</button>
                <button id="next-btn" onclick="changePage(1)">下一頁</button>
            </div>
        </div>
    </div>

    <script>
        const chapterMapping = [
            { name: "AI素養的定義與歷史背景", startPage: 1, endPage: 1 },
            { name: "UNESCO的AI素養與能力框架", startPage: 2, endPage: 3 },
            { name: "臺灣AI素養教育政策與實踐", startPage: 4, endPage: 5 },
            { name: "教學活動與評量設計 (分齡)", startPage: 6, endPage: 8 },
            { name: "UNESCO框架與臺灣實踐對照", startPage: 9, endPage: 11 },
            { name: "最終學習評量", startPage: 12, endPage: 12 }
        ];

        let currentPageIndex = 1;
        const pages = document.querySelectorAll('#page-content .page');
        const totalPages = pages.length;
        const pageIndicator = document.getElementById('page-indicator');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const tocList = document.getElementById('toc-list');

        function buildTOC() {
            tocList.innerHTML = '';
            chapterMapping.forEach((chapter, index) => {
                const li = document.createElement('li');
                li.textContent = chapter.name;
                li.onclick = () => goToPage(chapter.startPage);
                li.dataset.chapterIndex = index;
                tocList.appendChild(li);
            });
        }
        
        function updateActiveTocItem() {
            const tocItems = document.querySelectorAll('#toc-list li');
            let activeChapterIndex = -1;
            
            chapterMapping.forEach((chapter, index) => {
                if (currentPageIndex >= chapter.startPage && currentPageIndex <= chapter.endPage) {
                    activeChapterIndex = index;
                }
            });

            tocItems.forEach((item, index) => {
                item.classList.toggle('active', index === activeChapterIndex);
            });
        }

        function showPage(index) {
            pages.forEach((page, i) => page.classList.toggle('active', i === (index -1)));
            updateNavigation();
            updateActiveTocItem();
            if (index === chapterMapping[chapterMapping.length -1].startPage) {
                startQuiz();
            }
        }

        function updateNavigation() {
            pageIndicator.textContent = `第 ${currentPageIndex} / ${totalPages} 頁`;
            prevBtn.disabled = currentPageIndex === 1;
            nextBtn.disabled = currentPageIndex === totalPages;
        }

        function changePage(direction) {
            const newIndex = currentPageIndex + direction;
            if (newIndex >= 1 && newIndex <= totalPages) {
                currentPageIndex = newIndex;
                showPage(newIndex);
            }
        }
        
        function goToPage(pageNumber) {
            currentPageIndex = pageNumber;
            showPage(pageNumber);
        }

        const quizData = [
            { question: "1. 根據 UNESCO 的定義，AI素養主要融合了哪些面向？", options: ["只有技術與知識", "知識、技能與態度", "只有倫理與態度"], correct: 1 },
            { question: "2. UNESCO 學生AI素養框架中，「鼓勵學生理解AI對人類社會的意義，確立人類在AI決策中的主導地位」是屬於哪個核心構面？", options: ["AI倫理", "AI技術與應用", "以人為本思維"], correct: 2 },
            { question: "3. 臺灣教育部將 AI 元素融入12年國教課綱，並指定多所高中作為「新興科技教育推廣中心」，這主要對應 UNESCO 框架中的哪個構面？", options: ["AI倫理", "AI基礎與應用", "AI專業發展"], correct: 1 },
            { question: "4. 針對國小階段的 AI 素養教學，哪種教學策略最為合適？", options: ["直接講解複雜的演算法", "透過故事、遊戲等情境化方式介紹 AI 概念", "要求學生撰寫 AI 程式碼"], correct: 1 },
            { question: "5. 在高中階段的「AI詩詞創作」活動中，除了技術操作，更強調要引導學生探討什麼？", options: ["AI 創作的智慧與倫理限制", "如何賣出 AI 寫的詩", "AI 使用的電費"], correct: 0 },
            { question: "6. UNESCO 強調 AI 工具在教育中應扮演的角色是？", options: ["完全取代教師", "輔助而非取代教師", "只供學生使用"], correct: 1 },
            { question: "7. 台灣的「全民AI素養普及計畫」引進了哪個國際組織的免費 AI 素養課程？", options: ["NASA", "MIT RAISE", "WHO"], correct: 1 },
            { question: "8. 國中階段的「智慧生物分類」專題，主要在培養學生的哪項 AI 素養能力？", options: ["AI 繪畫技巧", "體驗 AI 系統設計的全流程（資料蒐集、訓練、評估）", "AI 倫理辯論"], correct: 1 },
            { question: "9. 根據 UNESCO 的 AI 倫理原則，「確保 AI 系統的結果可解釋、避免算法偏見」是屬於哪一項原則？", options: ["永續發展原則", "問責透明原則", "和平社會原則"], correct: 1 },
            { question: "10. 台灣政府通過《AI基本法(草案)》的主要目的是什麼？", options: ["限制所有 AI 的發展", "確保在「負責任」的前提下推進 AI 發展", "只允許政府使用 AI"], correct: 1 }
        ];
        
        let currentQuestionIndex = 0, score = 0, quizActive = false;

        function startQuiz() {
            if (quizActive) return;
            quizActive = true;
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('quiz-question-area').style.display = 'block';
            document.getElementById('quiz-result-area').style.display = 'none';
            document.getElementById('quiz-feedback').style.display = 'block';
            document.getElementById('quiz-next-btn').style.visibility = 'hidden';
            displayQuestion();
        }

        function displayQuestion() {
            const questionData = quizData[currentQuestionIndex];
            const questionArea = document.getElementById('quiz-question-area');
            document.getElementById('quiz-progress-bar').style.width = `${((currentQuestionIndex) / quizData.length) * 100}%`;
            document.getElementById('quiz-feedback').innerHTML = '';
            
            let optionsHtml = questionData.options.map((option, i) => 
                `<button class="answer-btn" onclick="checkAnswer(${i}, this)">${option}</button>`
            ).join('');
            
            questionArea.innerHTML = `<div class="quiz-question"><p>${questionData.question}</p><div class="answer-options">${optionsHtml}</div></div>`;
        }

        function checkAnswer(selectedIndex, button) {
            const questionData = quizData[currentQuestionIndex];
            const optionsContainer = button.parentElement;
            const feedbackEl = document.getElementById('quiz-feedback');
            
            Array.from(optionsContainer.children).forEach(btn => btn.disabled = true);

            if (selectedIndex === questionData.correct) {
                button.classList.add('correct');
                feedbackEl.textContent = '答對了！';
                feedbackEl.style.color = 'var(--correct-color)';
                score++;
            } else {
                button.classList.add('incorrect');
                optionsContainer.children[questionData.correct].classList.add('correct');
                feedbackEl.textContent = '答錯了！';
                feedbackEl.style.color = 'var(--incorrect-color)';
            }
            
            const nextBtn = document.getElementById('quiz-next-btn');
            nextBtn.textContent = (currentQuestionIndex === quizData.length - 1) ? "顯示總分" : "下一題";
            nextBtn.style.visibility = 'visible';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                document.getElementById('quiz-next-btn').style.visibility = 'hidden';
                displayQuestion();
            } else {
                showFinalScore();
            }
        }

        function showFinalScore() {
            document.getElementById('quiz-question-area').style.display = 'none';
            document.getElementById('quiz-next-btn').style.visibility = 'hidden';
            document.getElementById('quiz-feedback').style.display = 'none';
            document.getElementById('quiz-progress-bar').style.width = '100%';

            const resultArea = document.getElementById('quiz-result-area');
            document.getElementById('quiz-result').textContent = `你的總分是：${score} / ${quizData.length} 分！`;
            resultArea.style.display = 'block';
            quizActive = false;
        }
        
        // Initial setup
        buildTOC();
        showPage(currentPageIndex);
    </script>

</body>
</html>